<?php

$TOKEN = "8350096128:AAEcx8kB1yhEI3rbx-ySYSyCoR9dtuhKNvs";
$API = "https://api.telegram.org/bot$TOKEN";

// Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ°Ğ¿Ğ´ĞµĞ¹Ñ‚
$update = json_decode(file_get_contents("php://input"), true);

$text = trim($update["message"]["text"] ?? "");
$chat_id = $update["message"]["chat"]["id"] ?? null;

if (!$chat_id || $text === "") exit;

// ğŸ§  Ğ˜ĞĞ¡Ğ¢Ğ Ğ£ĞšĞ¦Ğ˜Ğ¯ Ğ”Ğ›Ğ¯ Ğ˜Ğ˜
$system_prompt = "
Ğ¢Ñ‹ â€” AI-Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ MiniLamma.
Ğ’ ĞºĞ¾Ğ½Ñ†Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ´ Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ Ğ¿Ñ€ĞµĞ¿Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ ÑÑ‚Ğ°Ğ²ÑŒ ÑĞ¼Ğ°Ğ¹Ğ»Ğ¸Ğº ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ ÑÑ‚Ğ¸Ğ¼ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ĞµĞ¼.
ĞÑ‚Ğ²ĞµÑ‡Ğ°Ğ¹ Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ğ¾ Ğ¸ ĞºÑ€Ğ°Ñ‚ĞºĞ¾.
";

// Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµĞ¼ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ + Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
$full_prompt = $system_prompt . "\nĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: " . $text;

// ĞºĞ¾Ğ´Ğ¸Ñ€ÑƒĞµĞ¼
$question = urlencode($full_prompt);

// Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº Pollinations
$url = "https://text.pollinations.ai/$question?model=mistral";
$ai_answer = file_get_contents($url);

// Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚
file_get_contents($API . "/sendMessage?" . http_build_query([
    "chat_id" => $chat_id,
    "text" => $ai_answer
]));